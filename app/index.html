<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi AplicaciÃ³n - Auth0 + Netlify Functions</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/layout.css">
    <link rel="stylesheet" href="/assets/css/components.css">
    <link rel="stylesheet" href="/assets/css/auth.css">
</head>
<body>
    <!-- Auth Overlay -->
    <div id="authOverlay" class="auth-overlay" style="display: none;">
        <div class="auth-modal">
            <h2>ğŸ”’ Acceso Requerido</h2>
            <p>Para acceder a esta aplicaciÃ³n, necesitas iniciar sesiÃ³n con tu cuenta.</p>
            <button id="loginButton" class="auth-button">ğŸ”‘ Iniciar SesiÃ³n</button>
        </div>
    </div>

    <!-- App Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>ğŸš€ Mi App</h2>
            </div>
            <ul class="sidebar-nav">
                <li><a href="/app/" class="active"><i>ğŸ“Š</i> AplicaciÃ³n</a></li>
                <li><a href="/app/dashboard.html"><i>ğŸ“ˆ</i> Dashboard</a></li>
                <li><a href="#"><i>ğŸ“</i> ArtÃ­culos</a></li>
                <li><a href="#"><i>ğŸ‘¥</i> Usuarios</a></li>
                <li><a href="#"><i>âš™ï¸</i> ConfiguraciÃ³n</a></li>
                <li><a href="#"><i>ğŸ“ˆ</i> Reportes</a></li>
                <li><a href="#"><i>ğŸ’¬</i> Mensajes</a></li>
                <li><a href="#"><i>ğŸ””</i> Notificaciones</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Topbar -->
            <header class="topbar">
                <div class="topbar-left">
                    <h1>AplicaciÃ³n</h1>
                </div>
                <div class="topbar-right">
                    <div class="user-menu">
                        <button id="userButton" class="user-button" style="display: none;">
                            <div class="user-avatar" id="userAvatar">
                                <span id="userInitial">U</span>
                                <img id="userPicture" src="" alt="Foto de perfil" style="display: none;">
                            </div>
                            <span id="userName">Usuario</span>
                            <i>â–¼</i>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <div class="user-dropdown-item">
                                <i>ğŸ‘¤</i>
                                <span id="userEmail">usuario@email.com</span>
                            </div>
                            <div class="user-dropdown-item">
                                <i>ğŸ†”</i>
                                <span id="userId">ID del usuario</span>
                            </div>
                            <div class="user-dropdown-item">
                                <i>âœ…</i>
                                <span id="userVerified">Email verificado</span>
                            </div>
                            <div class="user-dropdown-item">
                                <i>âš™ï¸</i>
                                <span>ConfiguraciÃ³n</span>
                            </div>
                            <a href="#" class="user-dropdown-item logout" id="logoutButton">
                                <i>ğŸšª</i>
                                <span>Cerrar SesiÃ³n</span>
                            </a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="content-area">
                <div class="content-header">
                    <h2>Bienvenido a tu AplicaciÃ³n</h2>
                    <p>AquÃ­ puedes gestionar tu contenido y configuraciones.</p>
                </div>

                <div class="article">
                    <h3>ğŸ“° ArtÃ­culo de Ejemplo: ProtecciÃ³n de Contenido con Auth0</h3>
                    
                    <p>Este es un artÃ­culo de ejemplo que demuestra cÃ³mo funciona la protecciÃ³n de contenido en nuestra aplicaciÃ³n. Solo los usuarios autenticados pueden ver este contenido.</p>
                    
                    <div class="highlight">
                        <strong>ğŸ¯ Punto Clave:</strong> La autenticaciÃ³n con Auth0 asegura que solo usuarios autorizados puedan acceder a contenido sensible.
                    </div>
                    
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                    
                    <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    
                    <h3>ğŸ”§ CaracterÃ­sticas Implementadas</h3>
                    <ul style="margin: 15px 0; padding-left: 20px;">
                        <li>AutenticaciÃ³n segura con Auth0</li>
                        <li>ProtecciÃ³n de contenido con JWT tokens</li>
                        <li>Interfaz moderna y responsive</li>
                        <li>Manejo de sesiones persistente</li>
                        <li>Backend serverless con Netlify Functions</li>
                    </ul>
                    
                    <p>Esta implementaciÃ³n demuestra las mejores prÃ¡cticas para proteger contenido HTML estÃ¡tico usando tecnologÃ­as modernas y seguras.</p>
                </div>

                <!-- Server Data Section -->
                <div id="serverData" style="margin-top: 30px; display: none;">
                    <div class="article">
                        <h3>ğŸ“¡ Datos del Servidor</h3>
                        <div id="serverDataContent">
                            <p>Cargando datos del servidor...</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
    <script src="/assets/js/utils.js"></script>
    <script src="/assets/js/auth.js"></script>
    
    <script>
        // Inicializar elementos del DOM
        document.addEventListener('DOMContentLoaded', function() {
            // Obtener referencias a elementos del DOM
            authOverlay = document.getElementById('authOverlay');
            loginButton = document.getElementById('loginButton');
            userButton = document.getElementById('userButton');
            userDropdown = document.getElementById('userDropdown');
            logoutButton = document.getElementById('logoutButton');
            userName = document.getElementById('userName');
            userEmail = document.getElementById('userEmail');
            userId = document.getElementById('userId');
            userVerified = document.getElementById('userVerified');
            serverData = document.getElementById('serverData');
            serverDataContent = document.getElementById('serverDataContent');
            
            // Inicializar Auth0
            AuthManager.initAuth0();
        });
    </script>
</body>
</html>
